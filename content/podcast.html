---
title: "The Sigmacast"
date: 2024-04-15
draft: false
---

<div id="introduction">
<p>Your hub for Ergo content across two channels. The Ergo Podcast delivers audio from the Ergo Platform YouTube channel, featuring weekly AMAs and dev updates. The Sigmacast brings you community content, including the Peer 2 Peer podcast on YouTube and Twitter spaces - all focused on the Ergo ecosystem.</p>
</div>

<div id="episodes"></div>

<!-- ================= EPISODE MODAL ================= -->
<div id="episodeModal">
  <div id="episodeModalContent">
    <button class="close-btn" onclick="closeEpisodeModal()">✕</button>
    <h2 id="episodeTitle"></h2>
    <div id="episodeDescription"></div>
    <div id="episodeButtons"></div>
  </div>
</div>

<!-- ================= TRANSCRIPT MODAL ================= -->
<div id="transcriptModal">
  <div id="transcriptContent">
    <div id="transcriptHeader">
      <span id="transcriptTitle">Transcript</span>
      <div>
        <a id="downloadTranscriptBtn" class="button" target="_blank">Download</a>
        <button class="close-btn" onclick="closeTranscript()">✕</button>
      </div>
    </div>
    <div id="transcriptBody"></div>
  </div>
</div>

<style>
/* ---------- MODALS ---------- */
#episodeModal,
#transcriptModal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  backdrop-filter: blur(4px);
}

#episodeModalContent,
#transcriptContent {
  background: #111;
  color: #fff;
  width: 90%;
  max-width: 800px;
  max-height: 85vh;
  overflow-y: auto;
  padding: 25px;
  border-radius: 14px;
  position: relative;
}

.close-btn {
  position: absolute;
  top: 12px;
  right: 15px;
  background: none;
  border: none;
  color: white;
  font-size: 22px;
  cursor: pointer;
}

/* ---------- BUTTONS ---------- */
.button {
  display: inline-block;
  padding: 8px 15px;
  margin: 6px 6px 6px 0;
  border-radius: 6px;
  background: #1DB954;
  color: white;
  font-size: 14px;
  cursor: pointer;
  text-decoration: none;
}
.button.transcript { background: #555; }

/* ---------- EPISODE LIST ---------- */
.episode-title {
  cursor: pointer;
  text-decoration: underline;
}
</style>

<script>
/* ---------- HELPERS ---------- */
function slugify(text) {
  return text.toLowerCase()
    .replace(/[^a-z0-9]+/g, '-')
    .replace(/(^-|-$)/g, '');
}

/* ---------- EPISODE MODAL ---------- */
let episodeMap = {};

function openEpisodeModal(ep) {
  const id = 'episode-' + slugify(ep.title);
  location.hash = id;

  document.getElementById('episodeTitle').textContent = ep.title;
  document.getElementById('episodeDescription').innerHTML = ep.description;

  const btns = document.getElementById('episodeButtons');
  btns.innerHTML = '';

  btns.appendChild(makeBtn('Spotify', ep.listenLink));
  btns.appendChild(makeBtn('Apple', ep.appleLink));
  btns.appendChild(makeBtn('Download', ep.enclosureUrl, true));

  if (ep.transcriptUrl) {
    const t = document.createElement('button');
    t.className = 'button transcript';
    t.textContent = 'Read Transcript';
    t.onclick = () => openTranscript(ep.title, ep.transcriptUrl);
    btns.appendChild(t);
  }

  const share = document.createElement('button');
  share.className = 'button transcript';
  share.textContent = 'Share';
  share.onclick = () => {
    const url = location.href;
    navigator.clipboard.writeText(url);
    share.textContent = 'Copied!';
    setTimeout(() => share.textContent = 'Share', 1200);
  };
  btns.appendChild(share);

  document.getElementById('episodeModal').style.display = 'flex';
}

function closeEpisodeModal() {
  document.getElementById('episodeModal').style.display = 'none';
  history.pushState("", document.title, window.location.pathname);
}

function makeBtn(label, href, download=false) {
  const a = document.createElement('a');
  a.className = 'button';
  a.textContent = label;
  a.href = href;
  a.target = '_blank';
  if (download) a.download = '';
  return a;
}

/* ---------- RSS ---------- */
function fetchEpisodes(feedUrl, appleLink) {
  return fetch(feedUrl)
    .then(r => r.text())
    .then(str => new DOMParser().parseFromString(str, 'text/xml'))
    .then(data =>
      Array.from(data.querySelectorAll('item')).map(item => {
        const title = item.querySelector('title').textContent;
        const id = 'episode-' + slugify(title);

        const t = item.getElementsByTagNameNS(
          "https://podcastindex.org/namespace/1.0",
          "transcript"
        );

        const ep = {
          id,
          title,
          description: item.querySelector('description').textContent,
          listenLink: item.querySelector('link').textContent,
          appleLink,
          enclosureUrl: item.querySelector('enclosure').getAttribute('url'),
          transcriptUrl: t.length ? t[0].getAttribute('url') : null,
          pubDate: new Date(item.querySelector('pubDate').textContent)
        };

        episodeMap[id] = ep;
        return ep;
      })
    );
}

Promise.all([
  fetchEpisodes(
    'https://anchor.fm/s/f21c6414/podcast/rss',
    'https://podcasts.apple.com/gb/podcast/ergo-podcast/id1631767451'
  ),
  fetchEpisodes(
    'https://anchor.fm/s/d094dce0/podcast/rss',
    'https://podcasts.apple.com/us/podcast/the-sigmacast/id1656621659'
  )
]).then(([a,b]) => {
  const all = a.concat(b).sort((x,y)=>y.pubDate-x.pubDate);
  const container = document.getElementById('episodes');

  all.forEach(ep => {
    const h2 = document.createElement('h2');
    h2.textContent = ep.title;
    h2.className = 'episode-title';
    h2.onclick = () => openEpisodeModal(ep);
    container.appendChild(h2);
  });

  // auto-open from shared link
  if (location.hash && episodeMap[location.hash.substring(1)]) {
    openEpisodeModal(episodeMap[location.hash.substring(1)]);
  }
});

/* ---------- TRANSCRIPT (unchanged logic) ---------- */
function openTranscript(title, url) {
  const modal = document.getElementById('transcriptModal');
  document.getElementById('transcriptTitle').textContent = title;
  document.getElementById('transcriptBody').textContent = 'Loading...';
  modal.style.display = 'flex';

  fetch('https://api.codetabs.com/v1/proxy/?quest=' + encodeURIComponent(url))
    .then(r=>r.text())
    .then(t=>document.getElementById('transcriptBody').textContent=t);
}

function closeTranscript(){
  document.getElementById('transcriptModal').style.display='none';
}
</script>
