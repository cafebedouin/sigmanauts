---
title: "The Sigmacast"
date: 2024-04-15
draft: false
---

<div id="introduction">
<p>Your hub for Ergo content across two channels. The Ergo Podcast delivers audio from the Ergo Platform YouTube channel, featuring weekly AMAs and dev updates. The Sigmacast brings you community content, including the Peer 2 Peer podcast on YouTube and Twitter spaces - all focused on the Ergo ecosystem.</p>

<h2>Ergo Podcast</h2>
<p>Listen on <a href="https://podcasters.spotify.com/pod/show/ergopodcast" target="_blank">Spotify</a> or <a href="https://podcasts.apple.com/gb/podcast/ergo-podcast/id1631767451" target="_blank">Apple Podcasts</a>, or add this RSS feed to your preferred podcast app:</p>
<code>https://anchor.fm/s/f21c6414/podcast/rss</code>

<h2>The Sigmacast</h2>
<p>Listen on <a href="https://podcasts.apple.com/us/podcast/the-sigmacast/id1656621659" target="_blank">Apple Podcasts</a> or <a href="https://podcasters.spotify.com/pod/show/thesigmacast" target="_blank">Spotify</a>, or add this RSS feed to your preferred podcast app:</p>
<code>https://anchor.fm/s/d094dce0/podcast/rss</code>

<br><br>
<p>Episodes are available to listen to or download (by right-clicking and saving) right on this page.</p>
</div>

<div id="episodes"></div>

<!-- Transcript Modal -->
<div id="transcriptModal">
    <div id="transcriptContent">
        <div id="transcriptHeader">
            <span id="transcriptTitle">Transcript</span>
            <div>
                <a id="downloadTranscriptBtn" class="button" target="_blank">Download</a>
                <button class="close-btn" onclick="closeTranscript()">âœ•</button>
            </div>
        </div>
        <div id="transcriptBody"></div>
    </div>
</div>

<style>
/* ---------- THEME SYSTEM ---------- */
:root {
    color-scheme: light dark;
    --modal-bg: #1c1c1e;
    --modal-text: #f2f2f7;
    --modal-overlay: rgba(0,0,0,0.7);
}
@media (prefers-color-scheme: light) {
    :root {
        --modal-bg: #ffffff;
        --modal-text: #111111;
        --modal-overlay: rgba(0,0,0,0.5);
    }
}

/* ---------- BUTTONS ---------- */
.button {
    display: inline-block;
    padding: 8px 15px;
    margin: 5px;
    border-radius: 6px;
    text-decoration: none;
    font-size: 14px;
    cursor: pointer;
    color: white;
    background: #1DB954;
    transition: opacity 0.2s ease;
    vertical-align: middle; /* fix Apple button alignment */
}
.button:hover { opacity: 0.85; }
.button.spotify, .button.apple {
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
    padding: 0;
    margin-right: 5px;
    background-color: transparent;
}
.button.spotify {
    background-image: url('https://storage.googleapis.com/pr-newsroom-wp/1/2023/05/Spotify_Primary_Logo_RGB_Green.png');
    width: 24px;
    height: 24px;
}
.button.apple {
    background-image: url('https://logodownload.org/wp-content/uploads/2019/08/apple-podcasts-logo-0.png');
    width: 37.5px;
    height: 37.5px;
}
.button.transcript { background: #555; }

/* ---------- MODAL ---------- */
#transcriptModal {
    position: fixed;
    inset: 0;
    background: var(--modal-overlay);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    backdrop-filter: blur(4px);
}
#transcriptContent {
    width: 90%;
    max-width: 900px;
    max-height: 85vh;
    border-radius: 14px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    background: var(--modal-bg);
    color: var(--modal-text);
    box-shadow: 0 10px 40px rgba(0,0,0,0.5);
}
#transcriptHeader {
    padding: 15px 20px;
    background: #1DB954;
    color: white;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
#transcriptBody {
    padding: 20px;
    overflow-y: auto;
    font-family: system-ui, sans-serif;
    font-size: 15px;
    line-height: 1.6;
    white-space: pre-wrap;
}
.close-btn {
    background: none;
    border: none;
    color: white;
    font-size: 20px;
    cursor: pointer;
}
</style>

<script>
/* ---------- RSS ---------- */
function fetchAndDisplayEpisodes(feedUrl) {
    return fetch(feedUrl)
        .then(r => r.text())
        .then(str => new DOMParser().parseFromString(str, 'text/xml'))
        .then(data => {
            return Array.from(data.querySelectorAll('item')).map(item => {
                // Correctly parse transcript using namespace fallback
                let transcriptUrl = null;
                const nsTags = item.getElementsByTagNameNS("https://podcastindex.org/namespace/1.0","transcript");
                if(nsTags.length>0) transcriptUrl = nsTags[0].getAttribute('url');

                return {
                    title: item.querySelector('title').textContent,
                    description: item.querySelector('description').textContent,
                    listenLink: item.querySelector('link').textContent,
                    enclosureUrl: item.querySelector('enclosure').getAttribute('url'),
                    pubDate: new Date(item.querySelector('pubDate').textContent),
                    transcriptUrl: transcriptUrl
                };
            });
        });
}

Promise.all([
    fetchAndDisplayEpisodes('https://anchor.fm/s/f21c6414/podcast/rss'),
    fetchAndDisplayEpisodes('https://anchor.fm/s/d094dce0/podcast/rss')
]).then(([a,b])=>{
    const all = a.concat(b).sort((x,y)=> y.pubDate - x.pubDate);
    const container = document.getElementById('episodes');

    all.forEach(ep=>{
        const div = document.createElement('div');
        const h2 = document.createElement('h2'); h2.textContent = ep.title;
        const desc = document.createElement('div'); desc.innerHTML = ep.description;

        const btnWrap = document.createElement('div');

        // Spotify listen button
        const spotifyBtn = document.createElement('a');
        spotifyBtn.className = 'button spotify';
        spotifyBtn.href = ep.listenLink;
        spotifyBtn.target='_blank';
        btnWrap.appendChild(spotifyBtn);

        // Apple link button (aligned properly)
        const appleBtn = document.createElement('a');
        appleBtn.className='button apple';
        appleBtn.target='_blank';
        appleBtn.href = ep.listenLink.includes('ergopodcast')
            ? 'https://podcasts.apple.com/gb/podcast/ergo-podcast/id1631767451'
            : 'https://podcasts.apple.com/us/podcast/the-sigmacast/id1656621659';
        btnWrap.appendChild(appleBtn);

        // Download button
        const dl = document.createElement('a');
        dl.className = 'button';
        dl.textContent = 'Download';
        dl.href = ep.enclosureUrl;
        dl.download = ep.title+'.mp3';
        btnWrap.appendChild(dl);

        // Transcript button
        if(ep.transcriptUrl){
            const tbtn = document.createElement('a');
            tbtn.className = 'button transcript';
            tbtn.textContent='Read Transcript';
            tbtn.href='javascript:void(0)';
            tbtn.onclick = ()=>openTranscript(ep.title, ep.transcriptUrl);
            btnWrap.appendChild(tbtn);
        }

        div.appendChild(h2);
        div.appendChild(desc);
        div.appendChild(btnWrap);
        container.appendChild(div);
    });
});

/* ---------- TRANSCRIPT ---------- */
function openTranscript(title,url){
    const modal=document.getElementById('transcriptModal');
    const body=document.getElementById('transcriptBody');
    const titleElem=document.getElementById('transcriptTitle');
    const downloadBtn=document.getElementById('downloadTranscriptBtn');

    titleElem.textContent=title;
    body.textContent='Loading transcript...';

    const proxied='https://api.codetabs.com/v1/proxy/?quest='+encodeURIComponent(url);

    downloadBtn.href=proxied;
    downloadBtn.download=title+'.srt';

    modal.style.display='flex';

    fetch(proxied)
        .then(res=>res.text())
        .then(txt=>{
            body.textContent=formatSRT(txt);
        })
        .catch(err=>{
            body.textContent='Failed to load transcript via proxy.';
            console.error(err);
        });
}

function closeTranscript(){
    document.getElementById('transcriptModal').style.display='none';
}

document.getElementById('transcriptModal').addEventListener('click',function(e){
    if(e.target===this) closeTranscript();
});

/* Clean and merge SRT into readable paragraphs */
function formatSRT(data) {
    // Remove SRT numbering and timestamps
    let text = data.replace(/\r/g,'')
                   .replace(/^\d+$/gm,'')
                   .replace(/\d{2}:\d{2}:\d{2},\d{3} --> .*$/gm,'')
                   .trim();

    // Split into lines
    const lines = text.split('\n');

    const paragraphs = [];
    let buffer = [];

    lines.forEach(line => {
        line = line.trim();
        if (!line) {
            // empty line -> paragraph break
            if (buffer.length) {
                paragraphs.push(buffer.join(' '));
                buffer = [];
            }
        } else {
            buffer.push(line);
        }
    });
    if (buffer.length) paragraphs.push(buffer.join(' '));

    // Join paragraphs with double line breaks
    return paragraphs.join('\n\n');
}
</script>
