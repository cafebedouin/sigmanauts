---
title: "The Sigmacast"
date: 2024-04-15
draft: false
---

<div id="introduction">
<p>Your hub for Ergo content across two channels. The Ergo Podcast delivers audio from the Ergo Platform YouTube channel, featuring weekly AMAs and dev updates. The Sigmacast brings you community content, including the Peer 2 Peer podcast on YouTube and Twitter spaces - all focused on the Ergo ecosystem.</p>
</div>

<div id="episodes"></div>

<!-- ================= EPISODE MODAL ================= -->
<div id="episodeModal">
  <div id="episodeModalContent">
    <button class="close-btn" onclick="closeEpisodeModal()">✕</button>
    <h2 id="modalTitle"></h2>
    <div id="modalDescription"></div>
    <div id="modalButtons"></div>
  </div>
</div>

<!-- ================= TRANSCRIPT MODAL ================= -->
<div id="transcriptModal">
  <div id="transcriptContent">
    <div id="transcriptHeader">
      <span id="transcriptTitle">Transcript</span>
      <div>
        <a id="downloadTranscriptBtn" class="button" target="_blank">Download</a>
        <button class="close-btn" onclick="closeTranscript()">✕</button>
      </div>
    </div>
    <div id="transcriptBody"></div>
  </div>
</div>

<style>
/* ---------- DESCRIPTION CLAMP ---------- */
.episode-desc {
  max-width: 900px;
  line-height: 1.55;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
  opacity: 0.9;
}

.continue-link {
  display: inline-block;
  margin-top: 4px;
  font-size: 14px;
  cursor: pointer;
  text-decoration: underline;
  opacity: 0.8;
}

/* ---------- CLICKABLE TITLE ---------- */
.episode-title {
  cursor: pointer;
}
.episode-title:hover {
  text-decoration: underline;
}

/* ---------- MODALS ---------- */
#episodeModal,
#transcriptModal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

#episodeModalContent,
#transcriptContent {
  background: #111;
  color: white;
  width: 90%;
  max-width: 850px;
  max-height: 85vh;
  overflow-y: auto;
  padding: 28px;
  border-radius: 14px;
  position: relative;
}

.close-btn {
  position: absolute;
  top: 14px;
  right: 18px;
  background: none;
  border: none;
  font-size: 22px;
  color: white;
  cursor: pointer;
}

/* ---------- BUTTONS (unchanged) ---------- */
.button {
  display: inline-block;
  padding: 8px 15px;
  margin: 5px;
  border-radius: 6px;
  text-decoration: none;
  font-size: 14px;
  cursor: pointer;
  color: white;
  background: #1DB954;
}
.button.transcript { background: #555; }
</style>

<script>
/* ---------- HELPERS ---------- */
function slugify(text) {
  return text.toLowerCase()
    .replace(/[^a-z0-9]+/g, '-')
    .replace(/(^-|-$)/g, '');
}

/* ---------- EPISODE MODAL ---------- */
const episodeMap = {};

function openEpisodeModal(ep) {
  location.hash = ep.id;

  document.getElementById('modalTitle').textContent = ep.title;
  document.getElementById('modalDescription').innerHTML = ep.description;

  const btns = document.getElementById('modalButtons');
  btns.innerHTML = '';

  // Share ONLY in modal
  const share = document.createElement('button');
  share.className = 'button transcript';
  share.textContent = 'Share';
  share.onclick = () => {
    const url = `${location.origin}${location.pathname}#${ep.id}`;
    navigator.clipboard.writeText(url);
    share.textContent = 'Copied!';
    setTimeout(() => share.textContent = 'Share', 1200);
  };
  btns.appendChild(share);

  document.getElementById('episodeModal').style.display = 'flex';
}

function closeEpisodeModal() {
  document.getElementById('episodeModal').style.display = 'none';
  history.pushState("", document.title, location.pathname);
}

/* ---------- RSS ---------- */
function fetchEpisodes(feedUrl) {
  return fetch(feedUrl)
    .then(r => r.text())
    .then(t => new DOMParser().parseFromString(t, 'text/xml'))
    .then(xml =>
      Array.from(xml.querySelectorAll('item')).map(item => {
        const title = item.querySelector('title').textContent;
        const id = 'episode-' + slugify(title);

        const t = item.getElementsByTagNameNS(
          "https://podcastindex.org/namespace/1.0",
          "transcript"
        );

        const ep = {
          id,
          title,
          description: item.querySelector('description').textContent,
          listenLink: item.querySelector('link').textContent,
          enclosureUrl: item.querySelector('enclosure').getAttribute('url'),
          transcriptUrl: t.length ? t[0].getAttribute('url') : null,
          pubDate: new Date(item.querySelector('pubDate').textContent)
        };

        episodeMap[id] = ep;
        return ep;
      })
    );
}

Promise.all([
  fetchEpisodes('https://anchor.fm/s/f21c6414/podcast/rss'),
  fetchEpisodes('https://anchor.fm/s/d094dce0/podcast/rss')
]).then(([a,b]) => {
  const all = a.concat(b).sort((x,y)=>y.pubDate-x.pubDate);
  const container = document.getElementById('episodes');

  all.forEach(ep => {
    const div = document.createElement('div');

    const h2 = document.createElement('h2');
    h2.textContent = ep.title;
    h2.className = 'episode-title';
    h2.onclick = () => openEpisodeModal(ep);

    const desc = document.createElement('div');
    desc.className = 'episode-desc';
    desc.innerHTML = ep.description;

    const continueLink = document.createElement('span');
    continueLink.className = 'continue-link';
    continueLink.textContent = 'Continue reading';
    continueLink.onclick = () => openEpisodeModal(ep);

    const btnWrap = document.createElement('div');

    const dl = document.createElement('a');
    dl.className = 'button';
    dl.textContent = 'Download';
    dl.href = ep.enclosureUrl;
    dl.download = ep.title + '.mp3';
    btnWrap.appendChild(dl);

    if (ep.transcriptUrl) {
      const tbtn = document.createElement('a');
      tbtn.className = 'button transcript';
      tbtn.textContent = 'Read Transcript';
      tbtn.href = 'javascript:void(0)';
      tbtn.onclick = () => openTranscript(ep.title, ep.transcriptUrl);
      btnWrap.appendChild(tbtn);
    }

    div.appendChild(h2);
    div.appendChild(desc);
    div.appendChild(continueLink);
    div.appendChild(btnWrap);
    container.appendChild(div);
  });

  // Auto-open modal from shared link
  if (location.hash && episodeMap[location.hash.substring(1)]) {
    openEpisodeModal(episodeMap[location.hash.substring(1)]);
  }
});

/* ---------- TRANSCRIPT ---------- */
function openTranscript(title, url) {
  document.getElementById('transcriptTitle').textContent = title;
  document.getElementById('transcriptBody').textContent = 'Loading...';
  document.getElementById('transcriptModal').style.display = 'flex';

  fetch('https://api.codetabs.com/v1/proxy/?quest=' + encodeURIComponent(url))
    .then(r => r.text())
    .then(t => document.getElementById('transcriptBody').textContent = t);
}

function closeTranscript() {
  document.getElementById('transcriptModal').style.display = 'none';
}
</script>
